CREATE ALGORITHM=UNDEFINED DEFINER=`admin`@`%` SQL SECURITY DEFINER VIEW `labelledBundles` AS select `b`.`id` AS `id`,`b`.`churchId` AS `churchId`,`b`.`contentType` AS `contentType`,`b`.`contentId` AS `contentId`,`b`.`name` AS `name`,`b`.`fileId` AS `fileId`,`b`.`pendingUpdate` AS `pendingUpdate`,ifnull(ifnull(`l`.`name`,`s`.`name`),`p`.`name`) AS `contentName`,ifnull(`l`.`studyId`,`s`.`id`) AS `studyId`,ifnull(`s`.`programId`,`p`.`id`) AS `programId` from (((`bundles` `b` left join `programs` `p` on(((`b`.`contentType` = 'program') and (`p`.`id` = `b`.`contentId`)))) left join `studies` `s` on(((`b`.`contentType` = 'study') and (`s`.`id` = `b`.`contentId`)))) left join `lessons` `l` on(((`b`.`contentType` = 'lesson') and (`l`.`id` = `b`.`contentId`))));
